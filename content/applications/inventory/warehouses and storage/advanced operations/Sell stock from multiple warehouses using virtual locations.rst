:nosearch:
:show-content:
:hide-page-toc:
:show-toc:


=============================================================
فروش سهام از چندین انبار با استفاده از مکان های مجازی
=============================================================


در حالی که نگهداری موجودی و فروش موجودی از یک انبار ممکن است برای شرکت‌های کوچک‌تر کارساز باشد، شرکت‌های بزرگ‌تر ممکن است نیاز داشته باشند انبارهای متعددی را در مکان‌های مختلف نگهداری کنند یا از آنها بفروشند.


گاهی اوقات محصولات موجود در یک سفارش فروش ممکن است از دو (یا چند) انبار تهیه شود. در Odoo، بیرون کشیدن محصولات از چندین انبار برای برآورده کردن تقاضاهای فروش می تواند با استفاده از مکان های مجازی انجام شود.


.. important::
    راه حل در این سند، توصیف استفاده از یک انبار مجازی برای انجام سفارشات برای چندین انبار، دارای محدودیت هایی است. قبل از اقدام به موارد زیر توجه کنید:

    #. وقتی فیلد انبار در یک سفارش فروش روی یک انبار مجازی تنظیم می شود، آدرس انبار مجازی در فرم های برداشت، بسته بندی و تحویل نشان داده می شود، نه آدرس انبار واقعی.

    #. هر مکان دارای یک انبار_id (فیلد پنهان) است. به این معنی که موجودی موجود در انبار مجازی، مجموع موجودی انبارهای واقعی نخواهد بود، بلکه مجموع موجودی در مکان هایی خواهد بود که شناسه انبار آنها انبار مجازی است



.. Danger::
    محدودیت بالقوه برای کسانی که از تحویل دو یا سه مرحله ای استفاده می کنند:

     #. منطقه خروجی یا بسته بندی در فرم های مختلف به اشتباه به عنوان آدرس انبار مجازی فهرست شده است.

     #. هیچ راه حلی برای تحویل دو یا سه مرحله ای وجود ندارد.

     #.فقط در صورتی ادامه دهید که تنظیم آدرس انبار مجازی به عنوان منطقه خروجی یا بسته بندی برای گردش کار شرکت منطقی باشد.



.. note::
    برای ایجاد مکان‌های مجازی در انبارها و انجام مراحل زیر، ویژگی‌های **مکان های ذخیره سازی** و **مسیرهای چند مرحله ای** باید فعال باشند.

    برای انجام این کار، به برنامه  :menuselection:`انبار --> پیکربندی --> تنظیمات` بروید، به بخش انبار بروید و گزینه های **مکان های ذخیره سازی** و **مسیرهای چند مرحله ای** را فعال کنید. سپس، تغییرات را **ذخیره** کنید تا تمام شود.

    .. image:: ./img/advancedoperations/o20.jpg
        :align: center
        :alt: انبار 


مکان والد مجازی ایجاد کنید
---------------------------------------------------
قبل از ایجاد هر مکان ذخیره مجازی، یک انبار جدید ایجاد کنید که به عنوان یک انبار مجازی عمل می کند - مکان اصلی سایر انبارهای فیزیکی.


.. spoiler:: چرا یک انبار "مجازی"؟

    انبارهای مجازی برای شرکت هایی که دارای انبارهای فیزیکی متعدد هستند عالی هستند. این به این دلیل است که زمانی ممکن است وضعیتی پیش بیاید که انبار یک محصول خاص تمام شود، اما انبار دیگری همچنان انبار موجود باشد. در این مورد، از موجودی این دو (یا چند) انبار می توان برای انجام یک سفارش فروش استفاده کرد.

    انبار "مجازی" به عنوان یک جمع کننده واحد از تمام موجودی ذخیره شده در انبارهای فیزیکی شرکت عمل می کند و (برای اهداف ردیابی) برای ایجاد سلسله مراتبی از مکان ها در Odoo استفاده می شود.



برای ایجاد یک انبار جدید، به برنامه  :menuselection:`انبار --> پیکربندی --> انبار` بروید و روی جدید کلیک کنید. از اینجا، نام انبار و نام کوتاه را می توان تغییر داد، و سایر جزئیات انبار را می توان در تب پیکربندی انبار تغییر داد.

در آخر، روی ذخیره کلیک کنید تا ایجاد یک انبار معمولی به پایان برسد. برای تکمیل پیکربندی انبار مادر مجازی، مراحل زیر را دنبال کنید.


.. image:: ./img/advancedoperations/o21.jpg
    :align: center
    :alt: انبار 


ایجاد انبارهای فرزند
-------------------------------------
حداقل دو انبار کودک برای پیوند به انبار مجازی ایجاد کنید.


.. important::
    به منظور جمع‌آوری انبارها از چند انبار برای انجام یک سفارش فروش، باید حداقل دو انبار وجود داشته باشد که به‌عنوان مکان‌های فرزند انبار مکان والدین مجازی عمل می‌کنند.



برای انجام این کار، به برنامه  :menuselection:`انبار --> پیکربندی --> انبارها` بروید، روی **جدید** کلیک کنید و دستورالعمل‌های قبلی را برای پیکربندی مکان‌های موجودی فیزیکی دنبال کنید.

.. example::

    انبار والد
    انبار: انبار مجازی
    مکان WH:
    انبارهای فرزند
    انبارها: انبار A و انبار B
    مکان: Wh1 و Wh2

    .. image:: ./img/advancedoperations/o22.jpg
        :align: center
        :alt: انبار 


.. important::
    در حالی که مکان ذخیره مجازی بعداً به "مشاهده" تغییر خواهد کرد، نوع مکان باید در این مرحله مکان داخلی باشد تا انبارهای فرزند در بخش بعدی پیوند داده شود.


انبارهای فرزندرا به سهام مجازی پیوند دهید
برای تنظیم انبارهای فیزیکی به عنوان مکان‌های فرزند مکان مجازی که در مرحله قبل پیکربندی شده‌اند، به برنامه **انبار ‣ پیکربندی ‣ مکان‌ها** بروید.

هر فیلتری را از نوار جستجو حذف کنید. سپس، روی مکان انبار فیزیکی که قبلاً به‌عنوان مکان فرزند (به عنوان مثال Wh1 ایجاد شده بود، کلیک کنید و روی ویرایش کلیک کنید.

قسمت مکان والد را از Physical Locations به مکان انبار مجازی (به عنوان مثال WH از منوی کشویی تغییر دهید و روی ذخیره کلیک کنید.

.. important::
    
    رای انتخاب مکان انبار مجازی در منوی کشویی مکان والدین، مکان انبار اصلی (به عنوان مثال Partners باید نوع مکان آن را روی موقعیت داخلی تنظیم کند.


.. image:: ./img/advancedoperations/o23.jpg
    :align: center
    :alt: انبار 


مراحل قبل را برای پیکربندی دو یا چند انبار فرزند تکرار کنید.

پس از تکمیل، انبار مجازی و مادر (مانند parentسفارشات را با استفاده از موجودی انبارهای فرزند (مانند LOT2 و LOT2) انجام می‌دهد، اگر در هر مکان موجودی کافی وجود نداشته باشد.




مکان مجازی سهام را به عنوان "نما"(مشاهده)تنظیم کنید
-----------------------------------------------------------------------

نوع موقعیت مکانی سهام مجازی را روی مشاهده (نما) تنظیم کنید، زیرا این مکان ناموجودی است که برای گروه بندی انبارهای فیزیکی مختلف با هم استفاده می شود.

برای انجام این کار، به برنامه I :menuselection:`انبار --> پیکربندی --> مکان ها` بروید.

از فهرست مکان‌ها، روی مکان انبار مجازی (مانندparnerstکه قبلاً ایجاد شده است، کلیک کنید.

در فرم موقعیت مکانی، تحت عنوان اطلاعات اضافی، نوع مکان را روی مشاهده تنظیم کنید. تغییرات را ذخیره کنید.


.. image:: ./img/advancedoperations/o24.jpg
    :align: center
    :alt: انبار 


.. tip::
    برای مشاهده کل مقدار در همه انبارهای کودک پیوند شده، به فرم محصول بروید و روی دکمه هوشمند موجود کلیک کنید.

    .. image:: ./img/advancedoperations/o25.jpg
        :align: center
        :alt: انبار 


مثال: فروش محصولات از یک انبار مجازی
----------------------------------------------------------------
برای فروش محصولات از چندین انبار با استفاده از یک مکان والد مجازی، پایگاه داده باید حداقل دو انبار پیکربندی شده باشد - به ترتیب با حداقل یک محصول، با مقدار موجود در هر انبار.



با رفتن به برنامه فروش و کلیک روی جدید، یک قیمت برای محصول ایجاد کنید. در مظنه، یک مشتری اضافه کنید و روی افزودن یک محصول کلیک کنید تا دو محصول ذخیره شده در دو انبار اضافه شود.

سپس روی برگه اطلاعات دیگر در فرم سفارش فروش کلیک کنید. در قسمت **تحویل**، مقدار فیلد انبار را به انبار مجازی که قبلا ایجاد شده است، تغییر دهید. بعد، سفارش فروش را تایید کنید.


.. image:: ./img/advancedoperations/o26.jpg
    :align: center
    :alt: انبار 


سپس روی دکمه هوشمند تحویل کلیک کنید. از فرم تحویل انبار، تأیید کنید که مقدار مکان منبع با مقدار فیلد انبار از سفارش فروش مطابقت دارد. هر دو باید مکان انبار مجازی را فهرست کنند.

در نهایت، در فرم تحویل انبار، در برگه عملیات تفصیلی، تأیید کنید که مکان‌ها در ستون From برای هر محصول با مکان‌های فرزند مرتبط با مکان والد مجازی مطابقت دارند.


.. image:: ./img/advancedoperations/o27.jpg
    :align: center
    :alt: انبار 

.. important::
    مکان منبع در فرم تحویل انبار، و انبار در زیر برگه اطلاعات دیگر در سفارش فروش، باید با محصولات موجود در سفارش فروش که از انبارهای مختلف بیرون کشیده شوند، مطابقت داشته باشند.

    اگر انبار مجازی در قسمت منبع مکان در فرم تحویل انبار نیست، رزرو محصول را مجدداً از طریق:

    اجرای زمانبندی: حالت توسعه دهنده را روشن کنید و سپس به برنامه انبار ‣ عملیات ‣ اجرای برنامه ریز بروید.

    روی بررسی در دسترس بودن در سفارش تحویل کلیک کنید.

    اگر انبار مجازی در سفارش فروش به قسمت انبار اختصاص داده نشده است، آن را لغو کنید و با مجموعه انبار مجازی در قسمت انبار یک سفارش فروش جدید ایجاد کنید.

    اگر قسمت انبار در فرم سفارش فروش وجود نداشته باشد، ممکن است چندین انبار فرزند به درستی تنظیم نشده باشند. برای اطمینان از تنظیمات صحیح، بخش قبلی را مرور کنید.


.. tip::
    برای استفاده از موقعیت مکانی والد مجازی به عنوان انبار پیش‌فرض برای سفارش‌های فروش، هر فروشنده باید انبار مجازی را از منوی کشویی کنار انبار پیش‌فرض در فرم کارمند خود به آنها اختصاص دهد

    .. image:: ./img/advancedoperations/o28.jpg
        :align: center
        :alt: انبار 